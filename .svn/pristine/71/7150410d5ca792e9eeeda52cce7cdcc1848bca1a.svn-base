package rpg;

import java.util.*;

/**
 * @author Ilari Massa
 * @version Mar 20, 2019
 *
 */
public class Rodut implements Iterable<Rotu> {
    
    private String tiedostonNimi = "";
    
    private final Collection<Rotu> alkiot = new ArrayList<Rotu>();
    
    /**
     * Rodut muodostaja
     */
    public Rodut() {
        for(int i = 0; i<3 ; i++) {
            Rotu esim1 = new Rotu();
            esim1.taytaRotu(i);
            lisaa(esim1);
        }
    }
    /**
     * @param rotu rotu id
     */
    public void lisaa(Rotu rotu) {
        alkiot.add(rotu);
    }
    
    /**
     * Lukee rodut tiedostosta. 
     * TODO kesken
     * @param hakemisto tiedoston hakemisto
     * @throws SailoException jos lukeminen epÃ¤onnistuu
     */
    public void lueTiedostosta(String hakemisto) throws SailoException {
        tiedostonNimi = hakemisto + ".maat";
        throw new SailoException("Ei osata vielÃ¤ lukea tiedostoa " + tiedostonNimi);
    }
    
    
    /**
     * Tallentaa rodut tiedostoon.
     * TODO kesken
     * @throws SailoException jos tallennus epÃ¤onnistuu
     */
    public void tallenna() throws SailoException {
        throw new SailoException("Ei osata vielÃ¤ tallentaa tiedostoa " + tiedostonNimi);
    }
    
    /**
     * @return hakee taulukon koon
     */
    public int getLkm() {
        return alkiot.size();
    }
    
    @Override
    public Iterator<Rotu> iterator() {
        return alkiot.iterator();
    }
    
    /**
     * @param tunnusNro hahmon tunnusNro
     * @return löydetyt hahmot
     * @example
     * <pre name="test">
     * #import java.util.*;
     *  Rodut hj = new Rodut();
     *  rotu tyyli1 = new Rotu(1); hj.lisaa(tyyli1);
     *  Rotu tyyli2 = new Rotu(2); hj.lisaa(tyyli2);
     *  Rotu tyyli5 = new Rotu(5); hj.lisaa(tyyli5);
     *  List<Rotu> loytyneet;
     *  loytyneet = hj.annaRotu(4);
     *  loytyneet.size() === 0; 
     *  loytyneet = hj.annaRotu(1);
     *  loytyneet.size() === 1; 
     *  loytyneet.get(0) == tyyli1 === true;
     * </pre> 
     */
    public List<Rotu> annaRotu(int tunnusNro) {
        List<Rotu> loydetyt = new ArrayList<Rotu>();
        for (Rotu rotu : alkiot) 
            if (rotu.getRotuID() == tunnusNro) loydetyt.add(rotu);

        return loydetyt;
    }
    
    /**
     * @param args ei käytössä
     */
    public static void main(String[] args) {
        Rodut rodut = new Rodut();
        Rotu rotu1 = new Rotu();
        rotu1.taytaRotu(2);
        Rotu rotu2 = new Rotu();
        rotu2.taytaRotu(1);
        Rotu rotu3 = new Rotu();
        rotu3.taytaRotu(3);
        Rotu rotu4 = new Rotu();
        rotu4.taytaRotu(4);

        rodut.lisaa(rotu1);
        rodut.lisaa(rotu2);
        rodut.lisaa(rotu3);
        rodut.lisaa(rotu2);
        rodut.lisaa(rotu4);

        System.out.println("============= Rodut testi =================");

        List<Rotu> rodut2 = rodut.annaRotu(0);
        

        for (Rotu rotu : rodut2) {
            System.out.print(rotu.getRotu() + " ");
            rotu.tulosta(System.out);
        }
    }
}
